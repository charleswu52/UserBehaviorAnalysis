# Flink项目

## 基于Flink的电商用户行为分析

###  项目介绍

#### 用户行为分类

- 统计分析
  – 点击、浏览
  – 热门商品、近期热门商品、分类热门商品,流量统计
- 偏好统计
  – 收藏、喜欢、评分、打标签
  – 用户画像（用户信息标签化）,推荐列表(结合特征工程和机器学习算法)
- 风险控制
  – 下订单、支付、登录
  – 刷单监控,订单失效监控,恶意登录(短时间内频繁登录失败)监控

偏好统计在这不做主要实现，涉及到机器学习算法相关的知识，因此只设计实现统计分析与风险控制这两大模块：

#### 项目模块设计

- 实时统计分析
  • 实时热门商品统计
  • 实时热门页面流量统计
  • 实时访问流量统计
  • APP 市场推广统计
  • 页面广告点击量统计
- 业务流程及风险控制
  • 页面广告黑名单过滤
  • 恶意登录监控
  • 订单支付失效监控
  • 支付实时对账

#### 数据源解析

用户行为数据

| 字段       | 数据类型 | 说明                             |
| ---------- | -------- | -------------------------------- |
| userId     | Long     | 用户ID                           |
| itemID     | Long     | 商品ID                           |
| categoryID | Integer  | 商品类别ID                       |
| behavior   | String   | 用户行为('pv','buy','cart','fav) |
| timestamp  | Long     | 行为发生的时间戳，单位秒         |

web服务器日志

| 字段      | 数据类型 | 说明                          |
| --------- | -------- | ----------------------------- |
| ip        | String   | 访问者IP                      |
| userID    | Long     | 访问者ID                      |
| eventTime | Long     | 访问时间                      |
| method    | String   | 访问方法(GET/POST/PUT/DELETE) |
| url       | String   | 访问的URL                     |

### 项目模块

• 实时热门商品统计
• 实时流量统计
• 市场营销分析
• 恶意登录监控
• 订单支付实时监控

#### 实时热门商品统计

• 基本需求
– 统计近1小时内的热门商品,每5分钟更新一次
– 热门度用浏览次数(“pv”)来衡量

• 解决思路
– 在所有用户行为数据中,过滤出浏览(“pv”)行为进行统计
– 构建滑动窗口,窗口长度为1小时,滑动距离为5分钟





### 项目实现

#### 依赖引入与数据定义

#### 实时热门商品统计

